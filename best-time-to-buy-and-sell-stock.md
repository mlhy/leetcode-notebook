---
description: LeetCode | Easy | 121.Best Time to Buy and Sell Stock
---

# 121. Best Time to Buy and Sell Stock

**å‰ç½®çŸ¥è¯†ï¼šæ•°ç»„ã€åŠ¨æ€è§„åˆ’**

**ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº**è¿™ä¸€ç³»åˆ—æœ‰ 5 é“é¢˜ç›®ï¼Œç›®å‰æˆ‘å®Œæˆäº† 121 å’Œ 122ï¼Œè¿™ä¸¤é“é¢˜ç›®éƒ½è¢«æ ‡è®°ä¸ºäº† Easyï¼Œä½†æ˜¯å› ä¸ºä½¿ç”¨åˆ°åŠ¨æ€è§„åˆ’å¹¶ä¸æ˜¯å¾ˆç®€å•ï¼Œ122 çš„å…¶ä¸­ä¸€ç§è§£æ³•å¯ä»¥ä¸å€ŸåŠ©åŠ¨æ€è§„åˆ’ï¼Œä»£ç å®ç°å¾ˆç®€å•ï¼Œä½†æ˜¯æ€è·¯æ¸…å¥‡ğŸ˜ã€‚

| ç¼–å· | é¢˜ç›® | éš¾åº¦ |
| :---: | :--- | :--- |
|  121 | ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº | Easy |
| 122 | ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II | Easy |
| 123 | ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III | Hard |
| 188 | ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV | Hard |
| 309 | ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ | Medium |
| 714 | ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ | Medium |

### é¢˜ç›®ï¼šä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº

ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬$$i$$ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬$$i$$å¤©çš„ä»·æ ¼ã€‚

å¦‚æœä½ æœ€å¤šåªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“ï¼ˆå³ä¹°å…¥å’Œå–å‡ºä¸€æ”¯è‚¡ç¥¨ï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚

**Example 1ï¼š**

**Input:** \[7,1,5,3,6,4\] 

**Output:** 5 

**Explanation:** Buy on day 2 \(price = 1\) and sell on day 5 \(price = 6\), profit = 6-1 = 5.

**Noteï¼š**

ä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ã€‚

### ç®—æ³•æ€è·¯

å¦‚æœç®€å•çš„ä½¿ç”¨å¾ªç¯æ¥è®¡ç®—æ‰€æœ‰çš„å¯èƒ½æ€§ï¼Œé‚£ä¹ˆç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $$O(n^2)$$ ã€‚ä¸€æ—¦æ•°æ®é‡å¢å¤§ä¼šéå¸¸è€—æ—¶ï¼Œç±»ä¼¼çš„ç®—æ³•é—®é¢˜çš„ç®—æ³•å¤æ‚åº¦åº”å½“è¢«ä¼˜åŒ–åˆ° $$O(n)$$ ã€‚é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨**åŠ¨æ€è§„åˆ’**ï¼ˆDynamic Programmingï¼‰ï¼Œé¿å…æ¯ä¸€æ¬¡çš„è®¡ç®—éƒ½æ˜¯ä»å¤´å¼€å§‹ï¼Œèƒ½å¤Ÿå€ŸåŠ©å·²æœ‰çš„è®¡ç®—ç»“æœæ¥è¿›è¡Œæ›´æ–°ã€‚

é¢˜ç›®çš„å‡è®¾æ¯”è¾ƒç®€å•ï¼Œä¸€å¤©åªèƒ½è¿›è¡Œä¸€æ¬¡ä¹°æˆ–å–ï¼Œä¸”åªæœ‰ä¹°äº†æ‰èƒ½å–ã€‚é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦è®¡ç®—æ¯ä¸€å¤©å¯ä»¥å¾—åˆ°çš„**æœ€ä½çš„ä¹°å…¥ä»·**ä»¥åŠå¯æ“ä½œçš„**æœ€é«˜å–å‡ºä»·**ï¼Œè®¡ç®—å®ƒä»¬çš„å·®å€¼å°±å¯ä»¥å¾—åˆ°æ¯å¤©å¯çŸ¥çš„æœ€é«˜æ”¶å…¥ï¼Œç„¶åå–æœ€å¤§å€¼å³å¯ã€‚

ä»¥ **Example 1** ä¸ºä¾‹ï¼Œè¾“å…¥æ˜¯æ¯ä¸€å¤©çš„è‚¡ç¥¨ä»·æ ¼`[7,1,5,3,6,4]`ï¼Œé‚£ä¹ˆç¬¬ä¸€å¤©åªèƒ½ä»¥ 7 ä¹°å…¥ï¼Œç¬¬äºŒå¤©å¯ä»¥ä»¥ 1 ä¹°å…¥ï¼Œç¬¬ä¸‰å¤©çš„ä»·æ ¼5é«˜äºç¬¬äºŒå¤©ä»·æ ¼ 1ï¼Œæ‰€ä»¥è¿˜æ˜¯åœ¨ç¬¬äºŒå¤©ä»¥ 1 çš„ä»·æ ¼ä¹°å…¥ï¼Œä»¥æ­¤ç±»æ¨ï¼Œ**æ¯ä¸€å¤©çš„æœ€ä¼˜ä¹°å…¥ä»·æ˜¯**`[7,1,1,1,1,1]`ï¼›ä¹°å…¥ä»·éœ€è¦ä»ç¬¬ä¸€å¤©å‘åæ¨ç®—ï¼Œé‚£ä¹ˆå–å‡ºä»·éœ€è¦ä»æœ€åä¸€å¤©å‘å‰æ¨ç®—ï¼šåœ¨ç¬¬å…­å¤©åªèƒ½ä»¥ 4 å–å‡ºï¼Œåœ¨ç¬¬äº”å¤©å¯ä»¥ä»¥ 6 å–å‡ºï¼Œç¬¬å››å¤©çš„ä»·æ ¼ä¸º 3ï¼Œä½†æ˜¯å¯ä»¥ç­‰åˆ°ç¬¬äº”å¤©å†å–ï¼Œæ‰€ä»¥ç¬¬å››å¤©çš„å¯æ“ä½œçš„æœ€é«˜å–å‡ºä»·6ï¼Œä»¥æ­¤ç±»æ¨å¾—åˆ°**æ¯ä¸€å¤©å¯æ“ä½œçš„æœ€é«˜å–å‡ºä»·æ˜¯** `[7,6,6,6,6,4]`ã€‚é‚£ä¹ˆï¼Œ**æ¯ä¸€å¤©å¯çŸ¥çš„æœ€å¤§æ”¶ç›Šç”¨æœ€é«˜å–å‡ºä»·å‡å»æœ€ä½ä¹°å…¥ä»·å³å¯**ï¼š`[0,5,5,5,5,4]`ï¼Œå¯¹æ¯ä¸€å¤©çš„æœ€å¤§æ”¶ç›Šå–æœ€å¤§å€¼ï¼Œå¯ä»¥å¾—åˆ°åªè¿›è¡Œä¸€æ¬¡ä¹°å–çš„æ•´ä½“æœ€å¤§æ”¶ç›Šã€‚

| Day | 1 | 2 | 3 | 4 | 5 | 6 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **price** | 7 | 1 | 5 | 3 | 6 | 4 |
| **buying\_price** | **7** | 1 | 1 | 1 | 1 | 1 |
| **selling\_price** | 7 | 6 | 6 | 6 | 6 | 4 |
| **profit** | 0 | 5 | 5 | 5 | 5 | 3 |

### Python 3 å®ç°

```text
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        n = len(prices)
        
        if n==0:
            return 0

        # åˆå§‹åŒ– buying_pricesã€selling_prices
        buying_prices = prices.copy()
        selling_prices = prices.copy()
        
        # è®¡ç®—æ¯ä¸€å¤©çš„æœ€ä¼˜ä¹°å…¥ä»·
        buying_price = prices[0]
        for i in range(n):
            if buying_price > prices[i]:
                buying_price = prices[i]
            buying_prices[i] = buying_price
            
        # è®¡ç®—æ¯ä¸€å¤©å¯æ“ä½œçš„æœ€é«˜å–å‡ºä»·
        selling_price = prices[n-1]
        for i in range(n-1,-1,-1):
            if selling_price < prices[i]:
                selling_price = prices[i]
            selling_prices[i] = selling_price
            
        max_profit = max([y - x for x, y in zip(buying_prices,selling_prices)])
        
        return max(max_profit, 0)
```

### æœ€ä¼˜è§£æ³•-ç®—æ³•ä¼˜åŒ–

åœ¨ä¸Šé¢çš„ç®—æ³•ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $$O(n)$$ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ $$O(n)$$ ã€‚ä½†æ˜¯ä½¿ç”¨äº†ä¸¤ä¸ªé•¿åº¦ä¸º $$n$$ çš„å¾ªç¯ï¼Œå¹¶ä¸”ä½¿ç”¨äº†ä¸¤ä¸ªé•¿åº¦ä¸º $$n$$ çš„æ•°ç»„æ¥è®°å½•ä¹°å…¥ä»·å’Œå–å‡ºä»·ã€‚ä½†æ˜¯å…¶å®æ²¡æœ‰å¿…è¦è®°å½•ä¸‹æ¯ä¸€å¤©çš„ä¹°å…¥å’Œå–å‡ºä»·æ ¼ï¼Œåªéœ€è¦ä¸€ä¸ªå˜é‡ `buying_price` æ¥è®°å½•ä¹°å…¥ä»·ï¼Œä¸€æ—¦é‡åˆ°æ›´ä½çš„ä¹°å…¥ä»·æ›´æ–°æ­¤å˜é‡å³å¯ï¼›åŒæ—¶ä¹Ÿä¸éœ€è¦è®¡ç®—æ¯å¤©çš„å–å‡ºä»·ï¼Œåªéœ€è¦ä¸€ä¸ªå˜é‡ `max_profit` æ¥è®°å½•å¯è·å¾—çš„æœ€å¤§æ”¶ç›Šï¼Œå½“æ”¶ç›Šæ›´é«˜æ—¶æ›´æ–° `max_profit` å³å¯ã€‚

ä¼˜åŒ–åçš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¾ç„¶æ˜¯æ˜¯ $$O(n)$$ï¼Œä½†æ˜¯æ•ˆç‡å¾—åˆ°äº†æ˜¾è‘—æé«˜ï¼Œå› ä¸ºåªéœ€è¦ä¸€ä¸ªå¾ªç¯å°±å¯ä»¥å®Œæˆï¼›ç”±äºä¸å†éœ€è¦æ•°ç»„è®°å½•ä¹°å…¥ä»·å’Œå–å‡ºä»·ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦æ˜¯ $$O(1)$$ã€‚

### Python 3 å®ç°

```text
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        if len(prices) == 0:
            return 0
        max_profits = 0
        buying_price = prices[0]
        for i in range(len(prices)):
            if prices[i]<buying_price:
                buying_price = prices[i]
            else:
                profit = prices[i] - buying_price
                if profit>max_profits:
                    max_profits = profit
        return max_profits

```



